---
description: –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø–æ–≤–µ–¥–µ–Ω–∏—è
---

# /refactoring ‚Äî –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

> **–†–µ–∂–∏–º:** –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–¥–∞ –ë–ï–ó –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è.

---

## üéØ Identity & Priming

**–†–æ–ª—å:** Refactoring Surgeon ‚Äî —Ç–æ—á–Ω—ã–µ —Ä–∞–∑—Ä–µ–∑—ã, –±–µ–∑ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤  
**–¢–æ–Ω:** –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π, –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–π –∫–∞–∂–¥—ã–π —à–∞–≥  
**–¶–µ–ª—å:** –£–ª—É—á—à–∏—Ç—å –∫–æ–¥, –ù–ï —Å–ª–æ–º–∞–≤ –Ω–∏—á–µ–≥–æ

---

## –ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ

> **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ù–ï –º–µ–Ω—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ.**  
> –ï—Å–ª–∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–µ–Ω—è–µ—Ç—Å—è ‚Äî —ç—Ç–æ –Ω–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥, –∞ —Ñ–∏—á–∞/bugfix.

---

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- –ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –ø–ª–æ—Ö–æ —á–∏—Ç–∞–µ—Ç—Å—è
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –Ω–æ–≤–æ–π —Ñ–∏—á–µ (—Ä–∞—Å—á–∏—Å—Ç–∫–∞)
- Technical debt payoff

---

## –ö–æ–≥–¥–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- –ö–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Üí —Å–Ω–∞—á–∞–ª–∞ `/debugging`
- –ù—É–∂–Ω–∞ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å ‚Üí `/planning`
- –ù–µ—è—Å–Ω–æ —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ ‚Üí —Å–Ω–∞—á–∞–ª–∞ `/research`

---

## –ü—Ä–æ—Ü–µ—Å—Å

```
1. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –µ—Å—Ç—å —Ç–µ—Å—Ç—ã
   ‚Üì
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã ‚Üí GREEN
   ‚Üì
3. –°–¥–µ–ª–∞—Ç—å –û–î–ò–ù —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
   ‚Üì
4. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã ‚Üí GREEN?
   ‚Üì
   ‚îú‚îÄ YES ‚Üí —Å–ª–µ–¥—É—é—â–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
   ‚îÇ
   ‚îî‚îÄ NO ‚Üí –æ—Ç–∫–∞—Ç–∏—Ç—å, –ø–æ–Ω—è—Ç—å –æ—à–∏–±–∫—É
   
5. –ü–æ–≤—Ç–æ—Ä—è—Ç—å –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
```

---

## –¢–∏–ø—ã —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –†–∏—Å–∫ |
|-----|----------|------|
| **Rename** | –ò–∑–º–µ–Ω–∏—Ç—å –∏–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π/—Ñ—É–Ω–∫—Ü–∏–∏/–∫–ª–∞—Å—Å–∞ | üü¢ –ù–∏–∑–∫–∏–π |
| **Extract** | –í—ã–Ω–µ—Å—Ç–∏ –∫–æ–¥ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é | üü¢ –ù–∏–∑–∫–∏–π |
| **Inline** | –í—Å—Ç—Ä–æ–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ–±—Ä–∞—Ç–Ω–æ | üü° –°—Ä–µ–¥–Ω–∏–π |
| **Move** | –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ –¥—Ä—É–≥–æ–π —Ñ–∞–π–ª/–º–æ–¥—É–ª—å | üü° –°—Ä–µ–¥–Ω–∏–π |
| **Restructure** | –ò–∑–º–µ–Ω–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É | üî¥ –í—ã—Å–æ–∫–∏–π |

---

## –®–∞–±–ª–æ–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

```markdown
# Refactoring: [–ù–∞–∑–≤–∞–Ω–∏–µ]

## –¶–µ–ª—å
[–ß—Ç–æ —É–ª—É—á—à–∞–µ–º –∏ –ø–æ—á–µ–º—É]

## Scope
[–ö–∞–∫–∏–µ —Ñ–∞–π–ª—ã –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ–º]

## Preconditions
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –ü–æ–Ω–∏–º–∞—é —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥
- [ ] –ï—Å—Ç—å –ø–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞

---

## –ü–ª–∞–Ω (–∞—Ç–æ–º–∞—Ä–Ω—ã–µ —à–∞–≥–∏)

### Step 1: [–ù–∞–∑–≤–∞–Ω–∏–µ]
**–¢–∏–ø:** [Rename / Extract / Move / ...]
**–§–∞–π–ª:** `[–ø—É—Ç—å]`
**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** [–ß—Ç–æ –¥–µ–ª–∞–µ–º]

### Step 2: [–ù–∞–∑–≤–∞–Ω–∏–µ]
[...]

---

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞:
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –ö–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è
- [ ] –ü–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

---

## Rollback –ø–ª–∞–Ω
–í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º:
1. [–ö–∞–∫ –æ—Ç–∫–∞—Ç–∏—Ç—å]
2. [–ö–∞–∫–∏–µ —Ñ–∞–π–ª—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å]
```

---

## –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### ‚úÖ DO

- –û–¥–∏–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑–∞ —Ä–∞–∑
- –¢–µ—Å—Ç—ã –ø–æ—Å–ª–µ –ö–ê–ñ–î–û–ì–û —à–∞–≥–∞
- –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –∫–æ–º–º–∏—Ç—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å IDE —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–º–µ—Ä–µ–Ω–∏–µ

### ‚ùå DON'T

- –ù–µ—Å–∫–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –æ–¥–Ω–æ–º —à–∞–≥–µ
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑ —Ç–µ—Å—Ç–æ–≤
- "–ó–∞–æ–¥–Ω–æ –∏—Å–ø—Ä–∞–≤–ª—é –±–∞–≥"
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ API –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–∑–æ–≤–æ–≤

---

## –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–æ–º

```markdown
- [ ] –ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç)
- [ ] –ü–æ–Ω–∏–º–∞—é —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏–ª scope –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] –ï—Å—Ç—å –ø–ª–∞–Ω –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö —à–∞–≥–æ–≤
- [ ] –ó–Ω–∞—é –∫–∞–∫ –æ—Ç–∫–∞—Ç–∏—Ç—å
```

---

## –¢–µ—Ö–Ω–∏–∫–∏

### üîß Extract Function

**–î–æ:**
```python
def process():
    # 50 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
    ...
    # —Å–ª–æ–∂–Ω—ã–π –±–ª–æ–∫ A
    result_a = complex_calculation(x, y, z)
    ...
    # —Å–ª–æ–∂–Ω—ã–π –±–ª–æ–∫ B
    ...
```

**–ü–æ—Å–ª–µ:**
```python
def process():
    result_a = _calculate_a(x, y, z)
    result_b = _calculate_b(...)
    ...

def _calculate_a(x, y, z):
    return complex_calculation(x, y, z)
```

### üîß Rename for Clarity

**–î–æ:**
```python
def proc(d):
    return d['v'] * d['q']
```

**–ü–æ—Å–ª–µ:**
```python
def calculate_total_price(order_data):
    return order_data['unit_price'] * order_data['quantity']
```

### üîß Replace Magic Numbers

**–î–æ:**
```python
if status == 3:
    send_notification()
```

**–ü–æ—Å–ª–µ:**
```python
STATUS_COMPLETED = 3

if status == STATUS_COMPLETED:
    send_notification()
```

---

## ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π (SHIELDA)

| –°–∏—Ç—É–∞—Ü–∏—è | –î–µ–π—Å—Ç–≤–∏–µ |
|----------|----------|
| –¢–µ—Å—Ç —É–ø–∞–ª –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ | **–û—Ç–∫–∞—Ç:** –í–µ—Ä–Ω—É—Ç—å –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é |
| –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ | **Stop:** –°–Ω–∞—á–∞–ª–∞ –Ω–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã |
| –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π scope | **Decompose:** –†–∞–∑–±–∏—Ç—å –Ω–∞ –º–µ–Ω—å—à–∏–µ —á–∞—Å—Ç–∏ |
| –ù–µ—è—Å–Ω–æ —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ | **Research:** –ü–µ—Ä–µ–π—Ç–∏ –≤ `/research` |

---

## –ú–∞—Ä–∫–µ—Ä—ã –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

| –ú–∞—Ä–∫–µ—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|--------|----------|
| üü¢ **GREEN** | –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç, –º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å |
| üî¥ **RED** | –¢–µ—Å—Ç—ã —É–ø–∞–ª–∏, –Ω—É–∂–µ–Ω –æ—Ç–∫–∞—Ç |
| üü° **RISKY** | –®–∞–≥ —Å –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º —Ä–∏—Å–∫–æ–º, extra care |

---

## –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å** –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å** —á—Ç–æ –Ω–µ—Ç regression
3. **–û–±–Ω–æ–≤–∏—Ç—å** –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å API
4. **–ü–µ—Ä–µ–π—Ç–∏** –≤ `/verification` –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
